# Story 1.5.4: Participate Section (3 Pages)

Status: done

## Story

As a **Public Visitor** (worker or employer),
I want to **understand how the registry benefits me specifically**,
so that I'm **motivated to register or engage**.

## Acceptance Criteria

1. **AC1: Participate Landing Page (/participate)**
   - GIVEN a visitor navigates to `/participate`
   - WHEN the page renders
   - THEN the page MUST display:
     - H1: "Join Oyo State's Official Workforce Registry"
     - Subheading explaining OSLSR connects workers and employers
     - "I AM A..." section with two pathway cards:
       - **Skilled Worker** card with icon, description, 3 benefits, "Register My Skills →" link to `/participate/workers`
       - **Employer** card with icon, description, 3 benefits, "Find Workers →" link to `/participate/employers`
     - "Not sure where to start?" helper section with 3 contextual links
   - AND cards are displayed side-by-side on desktop, stacked on mobile

2. **AC2: For Workers Page (/participate/workers)**
   - GIVEN a visitor navigates to `/participate/workers`
   - WHEN the page renders
   - THEN the page MUST display:
     - H1: "Get Discovered by Employers Across Oyo State"
     - Hero CTA: "Register Now →" linking to `/register`
     - **"Why Register?"** section with 3 benefit cards:
       - Government Verified Badge (icon: BadgeCheck)
       - Appear in Marketplace (icon: Search)
       - Priority Access to programs (icon: GraduationCap)
     - Callout box explaining the verified badge
     - **"Who Should Register?"** section with 6 worker categories:
       - Artisans & Tradespeople, Skilled Professionals, Service Workers, Technical & Digital, Agricultural Workers, Job Seekers
     - **"How Registration Works"** 4-step flow (reuse pattern from About/How It Works):
       - Create Account → Verify Email → Complete Survey → Get Verified
     - **"What You'll Need"** checklist: NIN, Phone, Email, ~10 minutes
     - NIN callout with NIMC link
     - **"Your Privacy Is Protected"** section with 4 privacy assurances
     - **FAQ accordion** with 5 questions specific to workers
     - Final CTA: "Register Now →" linking to `/register` and "Continue your registration →" linking to `/login`

3. **AC3: For Employers Page (/participate/employers)**
   - GIVEN a visitor navigates to `/participate/employers`
   - WHEN the page renders
   - THEN the page MUST display:
     - H1: "Find Verified Skilled Workers in Your Area"
     - Hero CTA: "Browse Marketplace →" linking to `/marketplace`
     - **"Why Use the OSLSR Marketplace?"** section with 6 benefit cards:
       - Verified Identities, Local Talent, Reduce Hiring Risk, Search by Skill, Free to Search, Support Local Workforce
     - **"How It Works"** 4-step flow:
       - Search Marketplace → View Profiles → Request Contact → Hire Directly
     - **"Understanding Verification"** callout box:
       - What the badge means (4 points)
       - What it does NOT mean (3 disclaimers)
     - **"What Information Is Visible?"** table showing Public vs Registered visibility
     - **"Employer Registration"** section explaining free account requirements
     - **FAQ accordion** with 5 questions specific to employers
     - **Search placeholder** at bottom (Phase 1: "Coming Soon" UI mockup)
     - Final CTA: "Create Employer Account →" linking to `/register`

4. **AC4: Routing & Navigation Integration**
   - GIVEN the routes already exist in App.tsx as PlaceholderPages
   - WHEN implementing actual pages
   - THEN MUST:
     - Replace PlaceholderPage components with lazy-loaded actual pages
     - Maintain existing route structure (`/participate`, `/participate/workers`, `/participate/employers`)
   - AND MUST update `NavDropdown.tsx` participateItems:
     - Add `/participate` landing page link (currently missing)
     - Keep existing `/participate/workers` and `/participate/employers` items
   - NOTE: Verify MobileNav syncs automatically via participateItems import

5. **AC5: Responsive Design & Accessibility**
   - GIVEN various viewport sizes
   - WHEN viewing any Participate section page
   - THEN all pages MUST:
     - Be fully responsive (mobile-first)
     - Meet WCAG 2.1 AA accessibility standards
     - Use proper heading hierarchy (only ONE H1 per page)
     - Have sufficient color contrast (4.5:1 minimum)
     - Support keyboard navigation
     - FAQ accordions must be keyboard accessible

6. **AC6: Testing Requirements**
   - GIVEN the feature test folder pattern
   - WHEN implementing tests
   - THEN tests MUST:
     - Be co-located in `apps/web/src/features/participate/__tests__/`
     - Cover all 3 pages with render and content tests
     - Verify navigation links work correctly
     - Test FAQ accordion expansion
     - Achieve minimum 80% coverage for the feature
   - ESTIMATED: ~20-25 tests total (3 pages × 7-8 assertions each)

## Tasks / Subtasks

- [x] **Task 0: Prerequisites & Feature Scaffolding** (AC: all)
  - [x] 0.0 **PREREQUISITE:** Install shadcn Accordion component: `npx shadcn@latest add accordion`
  - [x] 0.1 Create feature directory: `apps/web/src/features/participate/`
  - [x] 0.2 Create `apps/web/src/features/participate/index.ts` barrel export
  - [x] 0.3 Create `apps/web/src/features/participate/pages/` directory
  - [x] 0.4 Create `apps/web/src/features/participate/components/` directory
  - [x] 0.5 Create `apps/web/src/features/participate/__tests__/` directory

- [x] **Task 1: Shared Participate Components** (AC: all)
  - [x] 1.1 Pages use inline hero pattern (simpler than separate wrapper)
  - [x] 1.2 Create `PathwayCard.tsx` - large card with icon, title, description, benefits list, CTA link
  - [x] 1.3 Create `WorkerCategoryCard.tsx` - category with title and examples list
  - [x] 1.4 Create `FAQAccordion.tsx` - accessible accordion using shadcn Accordion
  - [x] 1.5 Create `VisibilityTable.tsx` - table showing public vs registered employer visibility
  - [x] 1.6 **REUSED** `BenefitCard` from `features/about/components/BenefitCard.tsx`
  - [x] 1.7 **REUSED** `AboutCallout` from `features/about/components/AboutCallout.tsx`

- [x] **Task 2: Participate Landing Page** (AC: 1, 4)
  - [x] 2.1 Create `apps/web/src/features/participate/pages/ParticipateLandingPage.tsx`
  - [x] 2.2 Implement hero section with H1 and subheading
  - [x] 2.3 Implement "I Am A..." section with two PathwayCards
  - [x] 2.4 Implement "Not sure where to start?" helper section
  - [x] 2.5 Update App.tsx: Replace PlaceholderPage for `/participate` with lazy-loaded ParticipateLandingPage

- [x] **Task 3: For Workers Page** (AC: 2, 4)
  - [x] 3.1 Create `apps/web/src/features/participate/pages/WorkersPage.tsx`
  - [x] 3.2 Implement hero section with H1 and Register CTA
  - [x] 3.3 Implement "Why Register?" section with 3 BenefitCards
  - [x] 3.4 Implement verified badge callout using AboutCallout
  - [x] 3.5 Implement "Who Should Register?" section with 6 WorkerCategoryCards
  - [x] 3.6 Implement "How Registration Works" 4-step flow
  - [x] 3.7 Implement "What You'll Need" checklist with NIN callout (NIMC link)
  - [x] 3.8 Implement "Your Privacy Is Protected" section
  - [x] 3.9 Implement FAQ accordion with 5 worker-specific questions
  - [x] 3.10 Implement final CTA section
  - [x] 3.11 Update App.tsx: Replace PlaceholderPage for `/participate/workers`

- [x] **Task 4: For Employers Page** (AC: 3, 4)
  - [x] 4.1 Create `apps/web/src/features/participate/pages/EmployersPage.tsx`
  - [x] 4.2 Implement hero section with H1 and Marketplace CTA
  - [x] 4.3 Implement "Why Use the OSLSR Marketplace?" section with 6 BenefitCards
  - [x] 4.4 Implement "How It Works" 4-step flow
  - [x] 4.5 Implement "Understanding Verification" callout box (what it means + disclaimers)
  - [x] 4.6 Implement "What Information Is Visible?" VisibilityTable
  - [x] 4.7 Implement "Employer Registration" section
  - [x] 4.8 Implement FAQ accordion with 5 employer-specific questions
  - [x] 4.9 Implement search placeholder UI (Phase 1: "Coming Soon" with disabled dropdowns)
  - [x] 4.10 Implement final CTA section
  - [x] 4.11 Update App.tsx: Replace PlaceholderPage for `/participate/employers`

- [x] **Task 5: Route & Navigation Updates** (AC: 4)
  - [x] 5.1 Add lazy imports for all 3 Participate pages in App.tsx
  - [x] 5.2 Update `/participate` index route to ParticipateLandingPage
  - [x] 5.3 Connect `/participate/workers` to WorkersPage
  - [x] 5.4 Connect `/participate/employers` to EmployersPage
  - [x] 5.5 Update `NavDropdown.tsx` participateItems with 3 items including landing page
  - [x] 5.6 MobileNav automatically syncs via participateItems import
  - [x] 5.7 Update NavDropdown tests to expect 3 participateItems

- [x] **Task 6: Testing** (AC: 5, 6)
  - [x] 6.1 Create `apps/web/src/features/participate/__tests__/ParticipateLandingPage.test.tsx`
  - [x] 6.2 Create `apps/web/src/features/participate/__tests__/WorkersPage.test.tsx`
  - [x] 6.3 Create `apps/web/src/features/participate/__tests__/EmployersPage.test.tsx`
  - [x] 6.4 Test all navigation links and CTAs
  - [x] 6.5 Test FAQ accordion keyboard accessibility
  - [x] 6.6 Test responsive behavior at mobile/tablet/desktop breakpoints

## Dev Notes

### CRITICAL: NavDropdown.tsx participateItems Is Missing Landing Page

**Location:** `apps/web/src/layouts/components/NavDropdown.tsx` (lines 25-28)

**Current** `participateItems` array:
```tsx
const participateItems = [
  { href: '/participate/workers', label: 'For Workers', description: 'Register your skills and find opportunities' },
  { href: '/participate/employers', label: 'For Employers', description: 'Access the skilled workforce database' },
];
```

**Missing:** `/participate` landing page link!

**Required Fix:**
```tsx
const participateItems = [
  { href: '/participate', label: 'Get Started', description: 'Choose your path - worker or employer' },
  { href: '/participate/workers', label: 'For Workers', description: 'Register your skills and find opportunities' },
  { href: '/participate/employers', label: 'For Employers', description: 'Access the skilled workforce database' },
];
```

### Current App.tsx Participate Routes (lines 162-186)

```tsx
<Route path="participate">
  <Route index element={<PlaceholderPage title="Participate" />} />
  <Route path="workers" element={<PlaceholderPage title="For Workers" />} />
  <Route path="employers" element={<PlaceholderPage title="For Employers" />} />
</Route>
```

All 3 routes exist - just need to replace PlaceholderPages with actual components.

### Reusable Components from About Section

Import these directly - DO NOT recreate:

```tsx
// From about feature
import { BenefitCard } from '../about/components/BenefitCard';
import { AboutCallout } from '../about/components/AboutCallout';

// Or if AboutCallout needs renaming for clarity, create a Callout alias
export { AboutCallout as Callout } from '../about/components/AboutCallout';
```

**BenefitCard** - Already exists at `features/about/components/BenefitCard.tsx`:
- Props: `title`, `description`, `icon` (LucideIcon)
- Perfect for Workers "Why Register?" and Employers "Why Use Marketplace?" sections

**AboutCallout** - Already exists at `features/about/components/AboutCallout.tsx`:
- Props:
  - `title?: string` - Optional heading
  - `children: ReactNode` - Content (text or JSX)
  - `variant?: 'info' | 'warning' | 'success' | 'highlight'` - Visual style (default: 'info')
  - `className?: string` - Additional CSS classes
- Use for verified badge explanation, NIN callout, privacy section

### Step Flow Pattern from About Section

The "How Registration Works" 4-step flow on Workers page is similar to About/How It Works. Reuse the visual pattern but with workers-specific copy.

### FAQ Accordion Component

Check if shadcn Accordion is installed:
```bash
npx shadcn@latest add accordion
```

If not installed, add it. Then create FAQAccordion wrapper:
```tsx
import { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from '@/components/ui/accordion';

interface FAQItem {
  question: string;
  answer: string;
}

function FAQAccordion({ items }: { items: FAQItem[] }) {
  return (
    <Accordion type="single" collapsible className="w-full">
      {items.map((item, index) => (
        <AccordionItem key={index} value={`item-${index}`}>
          <AccordionTrigger>{item.question}</AccordionTrigger>
          <AccordionContent>{item.answer}</AccordionContent>
        </AccordionItem>
      ))}
    </Accordion>
  );
}
```

### Content Copy Source

ALL content comes from `docs/public-website-ia.md` Section 4 (lines 913-1391).

Key wireframe sections:
- 4.1: Participate Landing (lines 915-965)
- 4.2: For Workers (lines 969-1169)
- 4.3: For Employers (lines 1180-1370)

### FAQ Content (From IA Document)

**Workers FAQ (5 questions):**
1. Is registration free? → Yes, completely free.
2. Do I need to upload a photo? → No, photos not required.
3. What if I don't want to appear in marketplace? → Your choice, data still helps planning.
4. Can I update my information later? → Yes, anytime before verification.
5. How long does verification take? → Most within 7 days.

**Employers FAQ (5 questions):**
1. Is there a fee to use the marketplace? → No, completely free.
2. Can I post job listings? → Not currently, search directory only.
3. What if worker's contact info is hidden? → Worker chose not to share, try others.
4. How do I report a fake profile? → Report button or support@oslsr.oyo.gov.ng
5. Does government guarantee worker quality? → No, verification confirms identity not skill.

### Phase 1 vs Phase 2 - Employers Search

The employers page has an embedded search form at the bottom. For Phase 1:
- Show the UI (skill dropdown, LGA dropdown, search button)
- Mark as "Coming Soon" or disable
- Alternative: Link to `/marketplace` with placeholder

Phase 2 will enable live search functionality.

### Icon Suggestions (Lucide React)

```tsx
import {
  // Workers page
  BadgeCheck,       // Government Verified Badge
  Search,           // Appear in Marketplace
  GraduationCap,    // Priority Access
  Smartphone,       // Create Account (step 1)
  Mail,             // Verify Email (step 2)
  ClipboardList,    // Complete Survey (step 3)
  CheckCircle,      // Get Verified (step 4)
  Shield,           // Privacy protection

  // Employers page
  ShieldCheck,      // Verified Identities
  MapPin,           // Local Talent
  Clock,            // Reduce Hiring Risk
  Filter,           // Search by Skill
  DollarSign,       // Free to Search (or Gift icon)
  Heart,            // Support Local Workforce
  Eye,              // View Profiles
  Phone,            // Request Contact
  Handshake,        // Hire Directly

  // Landing page
  User,             // Worker icon
  Building2,        // Employer icon
} from 'lucide-react';
```

### Worker Categories (For "Who Should Register?" Section)

From IA document lines 1022-1054:
1. **Artisans & Tradespeople** - Electricians, plumbers, carpenters, mechanics, welders, painters, bricklayers, tilers
2. **Skilled Professionals** - Tailors, hairdressers, barbers, caterers, event planners, photographers, makeup artists
3. **Service Workers** - Drivers, security guards, cleaners, domestic workers, delivery personnel
4. **Technical & Digital Workers** - Software developers, IT support, graphic designers, social media managers
5. **Agricultural Workers** - Farmers, farm hands, agro-processors, livestock handlers
6. **Job Seekers** - Currently unemployed but actively looking for work

### Visibility Table Data (Employers Page)

| Information | Public Search | Registered Employer |
|-------------|---------------|---------------------|
| Profession/Skill | ✓ Visible | ✓ Visible |
| Local Government | ✓ Visible | ✓ Visible |
| Experience Level | ✓ Visible | ✓ Visible |
| Verified Badge | ✓ Visible | ✓ Visible |
| Worker's Name | ✗ Hidden | ✓ Visible* |
| Phone Number | ✗ Hidden | ✓ Visible* |
| Bio | ✗ Hidden | ✓ Visible* |

*Only if worker opted in to share contact details.

### Test File Pattern

```tsx
// apps/web/src/features/participate/__tests__/WorkersPage.test.tsx
import { describe, it, expect } from 'vitest';
import { render, screen } from '@testing-library/react';
import { BrowserRouter } from 'react-router-dom';
import WorkersPage from '../pages/WorkersPage';

describe('WorkersPage', () => {
  const renderPage = () => render(
    <BrowserRouter>
      <WorkersPage />
    </BrowserRouter>
  );

  it('renders hero section with correct heading', () => {
    renderPage();
    expect(screen.getByRole('heading', { level: 1 })).toHaveTextContent(
      "Get Discovered by Employers Across Oyo State"
    );
  });

  it('renders Register Now CTA linking to /register', () => {
    renderPage();
    const ctaLinks = screen.getAllByRole('link', { name: /register now/i });
    expect(ctaLinks.length).toBeGreaterThan(0);
    expect(ctaLinks[0]).toHaveAttribute('href', '/register');
  });

  it('renders all 3 benefit cards', () => {
    renderPage();
    expect(screen.getByText('Government Verified Badge')).toBeInTheDocument();
    expect(screen.getByText('Appear in Marketplace')).toBeInTheDocument();
    expect(screen.getByText('Priority Access')).toBeInTheDocument();
  });

  it('renders FAQ accordion with 5 questions', () => {
    renderPage();
    expect(screen.getByText('Is registration free?')).toBeInTheDocument();
    // ... etc
  });
});
```

### Lazy Loading Pattern

```tsx
// In App.tsx
const ParticipateLandingPage = lazy(() => import('./features/participate/pages/ParticipateLandingPage'));
const WorkersPage = lazy(() => import('./features/participate/pages/WorkersPage'));
const EmployersPage = lazy(() => import('./features/participate/pages/EmployersPage'));

// In routes
<Route path="participate">
  <Route index element={
    <Suspense fallback={<PageLoadingFallback />}>
      <ParticipateLandingPage />
    </Suspense>
  } />
  <Route path="workers" element={
    <Suspense fallback={<PageLoadingFallback />}>
      <WorkersPage />
    </Suspense>
  } />
  <Route path="employers" element={
    <Suspense fallback={<PageLoadingFallback />}>
      <EmployersPage />
    </Suspense>
  } />
</Route>
```

### Estimated Component Count

- 3 Page components
- 5 New shared components (PageWrapper, PathwayCard, WorkerCategoryCard, FAQAccordion, VisibilityTable)
- 2 Reused components from About (BenefitCard, AboutCallout)
- 3 Test files
- ~12 total new files
- ~20-25 new tests

### Definition of Done

- [x] shadcn Accordion component installed
- [x] All 3 Participate pages render correctly
- [x] All navigation links work (App.tsx routes)
- [x] NavDropdown.tsx updated with 3 participateItems (including landing)
- [x] MobileNav navigation verified working
- [x] FAQ accordions are keyboard accessible
- [x] Pages are fully responsive
- [x] WCAG 2.1 AA compliance verified
- [x] All tests pass (327 tests, 31 new)
- [x] No TypeScript errors
- [x] No ESLint warnings
- [x] Lazy loading implemented for all pages

## References

- Source Content: `docs/public-website-ia.md` Section 4 (Participate Section)
- PRD: FR17-FR19 (Marketplace search and contact reveal)
- UX Spec: Audience segmentation, trust signals
- Architecture: ADR-016 (Layout Architecture)
- Story 1.5.1: Design System & Layout patterns
- Story 1.5.2: Homepage section component patterns
- Story 1.5.3: About section - BenefitCard, AboutCallout, step flows

## Dev Agent Record

### Completion Notes

- All 3 Participate pages implemented per IA specification
- 31 new tests added (327 total tests passing)
- ESLint clean, build successful
- All pages lazy-loaded via App.tsx
- NavDropdown updated with 3 participateItems including /participate landing
- MobileNav automatically syncs via participateItems import
- Reused BenefitCard and AboutCallout from About feature
- shadcn Accordion component installed and used for FAQ sections

### Change Log

| Date | Change | Author |
|------|--------|--------|
| 2026-01-23 | Code review PASSED - story marked done, tasks completed | Claude Opus 4.5 |

### File List

**Created:**
- `apps/web/src/components/ui/accordion.tsx` - shadcn Accordion component
- `apps/web/src/features/participate/index.ts` - Barrel export
- `apps/web/src/features/participate/pages/ParticipateLandingPage.tsx` - Landing with PathwayCards
- `apps/web/src/features/participate/pages/WorkersPage.tsx` - Full workers page with FAQ
- `apps/web/src/features/participate/pages/EmployersPage.tsx` - Full employers page with FAQ
- `apps/web/src/features/participate/components/index.ts` - Component exports
- `apps/web/src/features/participate/components/PathwayCard.tsx` - Large pathway card
- `apps/web/src/features/participate/components/WorkerCategoryCard.tsx` - Worker category card
- `apps/web/src/features/participate/components/FAQAccordion.tsx` - Accessible FAQ accordion
- `apps/web/src/features/participate/components/VisibilityTable.tsx` - Visibility comparison table
- `apps/web/src/features/participate/__tests__/ParticipateLandingPage.test.tsx` - 6 tests
- `apps/web/src/features/participate/__tests__/WorkersPage.test.tsx` - 12 tests
- `apps/web/src/features/participate/__tests__/EmployersPage.test.tsx` - 10 tests

**Modified:**
- `apps/web/src/App.tsx` - Added lazy imports + routes for all 3 Participate pages
- `apps/web/src/layouts/components/NavDropdown.tsx` - Updated participateItems with 3 items
- `apps/web/src/layouts/components/NavDropdown.test.tsx` - Updated to expect 3 participateItems
- `apps/web/package.json` - Added @radix-ui/react-accordion dependency
